<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Details</title>
    <style>
        :root {
            --background-color: #2c2c2c;
            --text-color: #ffffff;
            --card-bg: #383838;
            --border-color: #444444;
            --accent-color: #ffd700;
            --positive-color: #4caf50;
            --negative-color: #f44336;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
            background-color: var(--background-color);
            color: var(--text-color);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            padding: 10px 20px;
            background-color: var(--card-bg);
            color: var(--accent-color);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            margin-bottom: 20px;
        }

        .back-button:hover {
            background-color: #444444;
        }

        .coin-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .coin-header h1 {
            margin: 0;
            color: var(--accent-color);
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            border: 1px solid var(--border-color);
        }

        .card h3 {
            margin-top: 0;
            color: var(--accent-color);
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 10px;
        }

        .data-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .link-button {
            padding: 8px 16px;
            background: var(--card-bg);
            color: var(--accent-color);
            text-decoration: none;
            border-radius: 4px;
            border: 1px solid var(--border-color);
            font-size: 14px;
            margin: 5px;
        }

        .link-button:hover {
            background-color: #444444;
        }

        .positive { color: var(--positive-color); }
        .negative { color: var(--negative-color); }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-button">‚Üê Back to List</a>
        <div id="coinDetails">Loading...</div>
    </div>

    <script>
        async function fetchCoinDetails() {
            try {
                const urlParams = new URLSearchParams(window.location.search);
                const coinId = urlParams.get('coinId');

                if (!coinId) {
                    throw new Error('No coin ID provided');
                }

                const response = await fetch(
                    `https://api.coingecko.com/api/v3/coins/${coinId}?localization=false&tickers=true&market_data=true&community_data=true&developer_data=true&sparkline=true`
                );
                const data = await response.json();

                document.title = `${data.name} (${data.symbol.toUpperCase()}) - Crypto Details`;

                const detailsContainer = document.getElementById('coinDetails');
                detailsContainer.innerHTML = `
                    <div class="coin-header">
                        <img src="${data.image.large}" alt="${data.name} logo">
                        <div>
                            <h1>${data.name} (${data.symbol.toUpperCase()})</h1>
                            <p>Rank #${data.market_cap_rank || 'N/A'}</p>
                        </div>
                    </div>

                    <div class="grid-container">
                        <div class="card">
                            <h3>Price Information</h3>
                            <div class="data-row">
                                <span>Current Price:</span>
                                <span>$${data.market_data.current_price.usd.toLocaleString()}</span>
                            </div>
                            <div class="data-row">
                                <span>24h Low / High:</span>
                                <span>$${data.market_data.low_24h.usd.toLocaleString()} / $${data.market_data.high_24h.usd.toLocaleString()}</span>
                            </div>
                            <div class="data-row">
                                <span>All-Time High:</span>
                                <span>$${data.market_data.ath.usd.toLocaleString()} (${new Date(data.market_data.ath_date.usd).toLocaleDateString()})</span>
                            </div>
                            <div class="data-row">
                                <span>All-Time Low:</span>
                                <span>$${data.market_data.atl.usd.toLocaleString()} (${new Date(data.market_data.atl_date.usd).toLocaleDateString()})</span>
                            </div>
                        </div>

                        <div class="card">
                            <h3>Price Changes</h3>
                            <div class="data-row">
                                <span>24h Change:</span>
                                <span class="${data.market_data.price_change_percentage_24h >= 0 ? 'positive' : 'negative'}">
                                    ${data.market_data.price_change_percentage_24h?.toFixed(2)}%
                                </span>
                            </div>
                            <div class="data-row">
                                <span>7d Change:</span>
                                <span class="${data.market_data.price_change_percentage_7d >= 0 ? 'positive' : 'negative'}">
                                    ${data.market_data.price_change_percentage_7d?.toFixed(2)}%
                                </span>
                            </div>
                            <div class="data-row">
                                <span>30d Change:</span>
                                <span class="${data.market_data.price_change_percentage_30d >= 0 ? 'positive' : 'negative'}">
                                    ${data.market_data.price_change_percentage_30d?.toFixed(2)}%
                                </span>
                            </div>
                            <div class="data-row">
                                <span>1y Change:</span>
                                <span class="${data.market_data.price_change_percentage_1y >= 0 ? 'positive' : 'negative'}">
                                    ${data.market_data.price_change_percentage_1y?.toFixed(2)}%
                                </span>
                            </div>
                        </div>

                        <div class="card">
                            <h3>Market Stats</h3>
                            <div class="data-row">
                                <span>Market Cap:</span>
                                <span>$${data.market_data.market_cap.usd.toLocaleString()}</span>
                            </div>
                            <div class="data-row">
                                <span>24h Volume:</span>
                                <span>$${data.market_data.total_volume.usd.toLocaleString()}</span>
                            </div>
                            <div class="data-row">
                                <span>Circulating Supply:</span>
                                <span>${data.market_data.circulating_supply.toLocaleString()} ${data.symbol.toUpperCase()}</span>
                            </div>
                            <div class="data-row">
                                <span>Total Supply:</span>
                                <span>${data.market_data.total_supply ? data.market_data.total_supply.toLocaleString() : 'N/A'} ${data.symbol.toUpperCase()}</span>
                            </div>
                        </div>

                        ${data.developer_data ? `
                            <div class="card">
                                <h3>Developer Data</h3>
                                <div class="data-row">
                                    <span>GitHub Stars:</span>
                                    <span>${data.developer_data.stars || 'N/A'}</span>
                                </div>
                                <div class="data-row">
                                    <span>Forks:</span>
                                    <span>${data.developer_data.forks || 'N/A'}</span>
                                </div>
                                <div class="data-row">
                                    <span>Issues:</span>
                                    <span>${data.developer_data.total_issues || 'N/A'}</span>
                                </div>
                                <div class="data-row">
                                    <span>Contributors:</span>
                                    <span>${data.developer_data.contributors || 'N/A'}</span>
                                </div>
                            </div>
                        ` : ''}

                        ${data.community_data ? `
                            <div class="card">
                                <h3>Community Stats</h3>
                                <div class="data-row">
                                    <span>Twitter Followers:</span>
                                    <span>${data.community_data.twitter_followers?.toLocaleString() || 'N/A'}</span>
                                </div>
                                <div class="data-row">
                                    <span>Reddit Subscribers:</span>
                                    <span>${data.community_data.reddit_subscribers?.toLocaleString() || 'N/A'}</span>
                                </div>
                                <div class="data-row">
                                    <span>Telegram Users:</span>
                                    <span>${data.community_data.telegram_channel_user_count?.toLocaleString() || 'N/A'}</span>
                                </div>
                            </div>
                        ` : ''}
                    </div>

                    <div class="card">
                        <h3>Links</h3>
                        <div class="links-section">
                            ${data.links.homepage[0] ? `<a href="${data.links.homepage[0]}" target="_blank" class="link-button">Website</a>` : ''}
                            ${data.links.blockchain_site[0] ? `<a href="${data.links.blockchain_site[0]}" target="_blank" class="link-button">Blockchain Explorer</a>` : ''}
                            ${data.links.official_forum_url[0] ? `<a href="${data.links.official_forum_url[0]}" target="_blank" class="link-button">Official Forum</a>` : ''}
                            ${data.links.subreddit_url ? `<a href="${data.links.subreddit_url}" target="_blank" class="link-button">Reddit</a>` : ''}
                            ${data.links.twitter_screen_name ? `<a href="https://twitter.com/${data.links.twitter_screen_name}" target="_blank" class="link-button">Twitter</a>` : ''}
                            ${data.links.telegram_channel_identifier ? `<a href="https://t.me/${data.links.telegram_channel_identifier}" target="_blank" class="link-button">Telegram</a>` : ''}
                        </div>
                    </div>

                    <div class="description">
                        <h3>About ${data.name}</h3>
                        <div>${data.description.en || 'No description available.'}</div>
                    </div>
                `;
            } catch (error) {
                console.error('Error fetching coin details:', error);
                document.getElementById('coinDetails').innerHTML = 'Error loading coin details. Please try again later.';
            }
        }

        fetchCoinDetails();
    </script>
</body>
</html>
